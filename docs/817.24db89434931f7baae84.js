(self.webpackChunkangular_router_demo_dong=self.webpackChunkangular_router_demo_dong||[]).push([[817],{6817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CrisisCenterModule:()=>A});var r=n(8583),i=n(665),s=n(7482),o=n(639);let c=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-crisis-center-home"]],decls:2,vars:0,template:function(e,t){1&e&&(o.TgZ(0,"h3"),o._uU(1,"Welcome to the Crisis Center"),o.qZA())},styles:[""]}),e})();var a=n(3190),u=n(6215),d=n(8002);const l=[{id:1,name:"Dragon Burning Cities"},{id:2,name:"Sky Rains Great White Sharks"},{id:3,name:"Giant Asteroid Heading For Earth"},{id:4,name:"Procrastinators Meeting Delayed Again"}];var g=n(4206);let p=(()=>{class e{constructor(e){this.messageService=e,this.crises$=new u.X(l)}getCrises(){return this.crises$}getCrisis(e){return this.getCrises().pipe((0,d.U)(t=>t.find(t=>t.id===+e)))}}return e.nextCrisisId=100,e.\u0275fac=function(t){return new(t||e)(o.LFG(g.e))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const m=function(e){return[e]};function f(e,t){if(1&e&&(o.TgZ(0,"li"),o.TgZ(1,"a",3),o.TgZ(2,"span",4),o._uU(3),o.qZA(),o._uU(4),o.qZA(),o.qZA()),2&e){const e=t.$implicit,n=o.oxw();o.ekj("selected",e.id===n.selectedId),o.xp6(1),o.Q6J("routerLink",o.VKq(5,m,e.id)),o.xp6(2),o.Oqu(e.id),o.xp6(1),o.hij("",e.name," ")}}let h=(()=>{class e{constructor(e,t){this.service=e,this.route=t,this.selectedId=0}ngOnInit(){this.crises$=this.route.paramMap.pipe((0,a.w)(e=>(this.selectedId=parseInt(e.get("id"),10),this.service.getCrises())))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p),o.Y36(s.gz))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-crisis-list"]],decls:8,vars:3,consts:[[1,"crises"],[3,"selected",4,"ngFor","ngForOf"],["routerLink","/sidekicks"],[3,"routerLink"],[1,"badge"]],template:function(e,t){1&e&&(o.TgZ(0,"h2"),o._uU(1,"Crises"),o.qZA(),o.TgZ(2,"ul",0),o.YNc(3,f,5,7,"li",1),o.ALo(4,"async"),o.qZA(),o.TgZ(5,"button",2),o._uU(6,"Go to sidekicks"),o.qZA(),o._UZ(7,"router-outlet")),2&e&&(o.xp6(3),o.Q6J("ngForOf",o.lcZ(4,1,t.crises$)))},directives:[r.sg,s.rH,s.lC,s.yS],pipes:[r.Ov],styles:[".crises[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0;width:100%}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{left:.1em}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;display:block;font-size:1.2rem;background-color:#eee;margin:.5rem .5rem .5rem 0;padding:.5rem 0;border-radius:4px}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2c3a41;background-color:#e6e6e6}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{background-color:#525252;color:#fafafa}.crises[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#d6e6f7}.crises[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#bdd7f5}.crises[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.5em .6em;color:#fff;background-color:#435b60;min-width:16px;margin-right:.8em;border-radius:4px 0 0 4px}"]}),e})(),C=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-crisis-center"]],decls:3,vars:0,template:function(e,t){1&e&&(o.TgZ(0,"h2"),o._uU(1,"Crisis Center"),o.qZA(),o._UZ(2,"router-outlet"))},directives:[s.lC],styles:[""]}),e})();var v=n(5917);let _=(()=>{class e{confirm(e){const t=window.confirm(e||"Is it OK?");return(0,v.of)(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Z(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"h3"),o._uU(2),o.qZA(),o.TgZ(3,"p"),o._uU(4),o.qZA(),o.TgZ(5,"label",1),o._uU(6,"Crisis name: "),o.qZA(),o.TgZ(7,"input",2),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().editName=t}),o.qZA(),o.TgZ(8,"div"),o.TgZ(9,"button",3),o.NdJ("click",function(){return o.CHM(e),o.oxw().save()}),o._uU(10,"Save"),o.qZA(),o.TgZ(11,"button",3),o.NdJ("click",function(){return o.CHM(e),o.oxw().cancel()}),o._uU(12,"Cancel"),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.editName),o.xp6(2),o.hij("Id: ",e.crisis.id,""),o.xp6(3),o.Q6J("ngModel",e.editName)}}let M=(()=>{class e{constructor(e,t,n){this.route=e,this.router=t,this.dialogService=n,this.editName=""}ngOnInit(){this.route.data.subscribe(e=>{const t=e.crisis;this.editName=t.name,this.crisis=t})}cancel(){this.gotoCrises()}save(){this.crisis.name=this.editName,this.gotoCrises()}canDeactivate(){return!this.crisis||this.crisis.name===this.editName||this.dialogService.confirm("Discard changes?")}gotoCrises(){this.router.navigate(["../",{id:this.crisis?this.crisis.id:null,foo:"foo"}],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(s.gz),o.Y36(s.F0),o.Y36(_))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-crisis-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],["for","crisis-name"],["type","text","id","crisis-name","placeholder","name",3,"ngModel","ngModelChange"],[3,"click"]],template:function(e,t){1&e&&o.YNc(0,Z,13,3,"div",0),2&e&&o.Q6J("ngIf",t.crisis)},directives:[r.O5,i.Fj,i.JJ,i.On],styles:["h2[_ngcontent-%COMP%]{font-size:1.5rem}input[_ngcontent-%COMP%]{font-size:1rem;margin-top:1rem}"]}),e})(),O=(()=>{class e{canDeactivate(e,t,n){return console.log(t.paramMap.get("id")),console.log(n.url),!e.crisis||e.crisis.name===e.editName||e.dialogService.confirm("Discard changes?")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=n(9193),w=n(5257),y=n(9773);const P=[{path:"",component:C,children:[{path:"",component:h,children:[{path:":id",component:M,canDeactivate:[O],resolve:{crisis:(()=>{class e{constructor(e,t){this.cs=e,this.router=t}resolve(e,t){const n=e.paramMap.get("id");return this.cs.getCrisis(n).pipe((0,w.q)(1),(0,y.zg)(e=>e?(0,v.of)(e):(this.router.navigate(["/crisis-center"]),k.E)))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(p),o.LFG(s.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}},{path:"",component:c}]}]}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[s.Bz.forChild(P)],s.Bz]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.ez,i.u5,b]]}),e})()}}]);